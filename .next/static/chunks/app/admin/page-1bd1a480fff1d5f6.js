(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{76483:function(e,a,t){Promise.resolve().then(t.bind(t,57059))},57059:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var s=t(57437),r=t(2265),l=t(98728),d=t(95805),n=t(39763);let c=(0,n.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var i=t(91723),x=t(95252);let o=(0,n.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m=(0,n.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var u=t(65302);let h=(0,n.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var g=t(27648);function y(){var e,a,t;let[n,y]=(0,r.useState)([]),[p,j]=(0,r.useState)(!0),[N,f]=(0,r.useState)(""),[v,b]=(0,r.useState)("newest"),[k,w]=(0,r.useState)("ALL"),[C,D]=(0,r.useState)(""),[S,E]=(0,r.useState)({isOpen:!1,user:null,accountType:"CHECKING"}),[T,A]=(0,r.useState)(""),[Z,P]=(0,r.useState)(""),[L,O]=(0,r.useState)("");(0,r.useEffect)(()=>{U()},[]);let U=async()=>{try{let e=await fetch("/api/admin/users");if(!e.ok)throw Error("Failed to fetch users");let a=await e.json();y(a.users)}catch(e){O("Failed to load users"),console.error(e)}finally{j(!1)}},M=async(e,a)=>{try{(await fetch("/api/admin/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,updates:a})})).ok?(U(),f("User updated successfully"),setTimeout(()=>f(""),3e3)):f("Failed to update user")}catch(e){console.error("Error updating user:",e),f("Error updating user")}},q=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),I=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=e=>{switch(e){case"APPROVED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"REJECTED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},K=e=>{let a=new Date(e);return(new Date().getTime()-a.getTime())/36e5<=24},B=n.filter(e=>{let a=e.name.toLowerCase().includes(C.toLowerCase())||e.email.toLowerCase().includes(C.toLowerCase()),t="ALL"===k||e.kycStatus===k;return a&&t}).sort((e,a)=>{switch(v){case"newest":return new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(a.createdAt).getTime();case"name":return e.name.localeCompare(a.name);default:return 0}}),H={totalUsers:n.length,newSignups:n.filter(e=>K(e.createdAt)).length,pendingKyc:n.filter(e=>"PENDING"===e.kycStatus).length,totalBalance:n.reduce((e,a)=>e+a.accounts.reduce((e,a)=>e+a.balance,0),0)};return p?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):L?(0,s.jsx)("div",{className:"p-4 text-red-500",children:L}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.Z,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date().toLocaleTimeString()]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&(0,s.jsx)("div",{className:"mb-6 p-4 rounded-md ".concat(N.includes("successfully")?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200"),children:N}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(d.Z,{className:"h-6 w-6 text-gray-400"})}),(0,s.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Total Users"}),(0,s.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:H.totalUsers})]})})]})})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(c,{className:"h-6 w-6 text-green-400"})}),(0,s.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"New Signups (24h)"}),(0,s.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:H.newSignups})]})})]})})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-yellow-400"})}),(0,s.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Pending KYC"}),(0,s.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:H.pendingKyc})]})})]})})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(x.Z,{className:"h-6 w-6 text-blue-400"})}),(0,s.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Total Balance"}),(0,s.jsx)("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:q(H.totalBalance)})]})})]})})})]}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6",children:(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search users...",value:C,onChange:e=>D(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,s.jsxs)("select",{value:k,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"ALL",children:"All KYC Status"}),(0,s.jsx)("option",{value:"PENDING",children:"Pending"}),(0,s.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,s.jsx)("option",{value:"REJECTED",children:"Rejected"})]}),(0,s.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"newest",children:"Newest First"}),(0,s.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,s.jsx)("option",{value:"name",children:"Name A-Z"})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",B.length," of ",n.length," users"]})]})})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md",children:(0,s.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:B.map(e=>(0,s.jsxs)("li",{className:"px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.name.charAt(0).toUpperCase()})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),K(e.createdAt)&&(0,s.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"New"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email}),(0,s.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Joined: ",I(e.createdAt)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"text-right",children:e.accounts.map(a=>(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[a.type,":"]}),(0,s.jsx)("span",{className:"ml-1 font-medium text-gray-900 dark:text-white",children:q(a.balance)}),(0,s.jsx)("button",{onClick:()=>{E({isOpen:!0,user:e,accountType:a.type}),A(a.balance.toString())},className:"ml-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:(0,s.jsx)(m,{className:"h-3 w-3"})})]},a.id))}),(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(R(e.kycStatus)),children:e.kycStatus})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:"PENDING"===e.kycStatus&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>M(e.id,{kycStatus:"APPROVED"}),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"Approve KYC",children:(0,s.jsx)(u.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>M(e.id,{kycStatus:"REJECTED"}),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Reject KYC",children:(0,s.jsx)(h,{className:"h-5 w-5"})})]})})]})]}),e.phone||e.address||e.occupation?(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.phone&&(0,s.jsxs)("span",{children:["\uD83D\uDCDE ",e.phone]}),e.address&&(0,s.jsxs)("span",{className:"ml-4",children:["\uD83D\uDCCD ",e.address]}),e.occupation&&(0,s.jsxs)("span",{className:"ml-4",children:["\uD83D\uDCBC ",e.occupation]})]}):null,e.transactions.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Recent Transactions:"}),(0,s.jsx)("div",{className:"flex space-x-4",children:e.transactions.slice(0,3).map(e=>(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsxs)("span",{className:"".concat("DEPOSIT"===e.type?"text-green-600":"text-red-600"),children:["DEPOSIT"===e.type?"+":"-",q(Math.abs(e.amount))]}),(0,s.jsx)("span",{className:"text-gray-400 ml-1",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})]},e.id))})}),0===B.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(d.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No users found"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria."})]})]}),S.isOpen&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Update ",S.accountType," Balance"]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["User: ",null===(e=S.user)||void 0===e?void 0:e.name]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current Balance: ",q((null===(t=S.user)||void 0===t?void 0:null===(a=t.accounts.find(e=>e.type===S.accountType))||void 0===a?void 0:a.balance)||0)]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Balance"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:T,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"0.00"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for Change"}),(0,s.jsx)("textarea",{value:Z,onChange:e=>P(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter reason for balance adjustment..."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{E({isOpen:!1,user:null,accountType:"CHECKING"}),A(""),P("")},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{E({isOpen:!1,user:null,accountType:"CHECKING"}),A(""),P("")},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Update Balance"})]})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)(g.default,{href:"/admin/accounts",className:"p-4 border rounded-lg bg-white shadow hover:shadow-md transition",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Manage User Accounts"}),(0,s.jsx)("p",{className:"text-gray-600",children:"View and modify user account balances"})]}),(0,s.jsxs)(g.default,{href:"/admin/withdrawals",className:"p-4 border rounded-lg bg-white shadow hover:shadow-md transition",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Manage Withdrawals"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Process withdrawal requests to external banks"})]})]})})]})}},65302:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},98728:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},95805:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[451,971,117,744],function(){return e(e.s=76483)}),_N_E=e.O()}]);